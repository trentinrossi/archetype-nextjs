{
  "application_metadata": {
    "name": "CardDemo User Management System",
    "description": "User management component of the CardDemo application that handles adding new users to the security system with appropriate access levels",
    "domain": "User Administration and Security"
  },
  "backend": {
    "business_entities": [
      {
        "name": "User",
        "description": "Represents a system user with authentication credentials and access permissions",
        "attributes": [
          {
            "name": "user_id",
            "type": "string",
            "length": 8,
            "required": true,
            "description": "Unique identifier for the user"
          },
          {
            "name": "first_name",
            "type": "string",
            "length": 20,
            "required": true,
            "description": "User's first name"
          },
          {
            "name": "last_name",
            "type": "string",
            "length": 20,
            "required": true,
            "description": "User's last name"
          },
          {
            "name": "password",
            "type": "string",
            "length": 8,
            "required": true,
            "description": "User's authentication password"
          },
          {
            "name": "user_type",
            "type": "string",
            "length": 1,
            "required": true,
            "description": "Type of user indicating access level (Regular or Admin)"
          }
        ],
        "relationships": []
      }
    ],
    "business_rules": [
      {
        "id": "BR001",
        "name": "User ID Uniqueness",
        "description": "Each user must have a unique user ID in the system",
        "category": "Data Integrity",
        "logic": "Before adding a new user, the system checks if the entered User ID already exists in the USRSEC file. If a duplicate is found, the operation is rejected.",
        "conditions": [
          "User ID is provided",
          "User ID does not already exist in USRSEC file"
        ],
        "actions": [
          "Check USRSEC file for existing User ID",
          "If duplicate found, display error message and reject addition",
          "If unique, proceed with user creation"
        ]
      },
      {
        "id": "BR002",
        "name": "Required Field Validation",
        "description": "All user fields must be populated before a user can be added to the system",
        "category": "Data Validation",
        "logic": "The system validates that First Name, Last Name, User ID, Password, and User Type are all provided and not empty before allowing user creation.",
        "conditions": [
          "First Name is not empty",
          "Last Name is not empty",
          "User ID is not empty",
          "Password is not empty",
          "User Type is not empty"
        ],
        "actions": [
          "Validate each required field sequentially",
          "Display specific error message for first empty field found",
          "Position cursor at the empty field",
          "Prevent user creation until all fields are filled"
        ]
      },
      {
        "id": "BR003",
        "name": "User Type Classification",
        "description": "Users are classified into different types that determine their access permissions",
        "category": "Access Control",
        "logic": "The system allows creation of different user types, distinguishing between regular users and administrators with different permission levels.",
        "conditions": [
          "User Type is specified during user creation"
        ],
        "actions": [
          "Store user type with user record",
          "Use user type to determine access permissions"
        ]
      },
      {
        "id": "BR004",
        "name": "Successful User Addition Confirmation",
        "description": "Upon successful user addition, the system provides confirmation and clears the input form",
        "category": "User Feedback",
        "logic": "After successfully adding a user to the USRSEC file, the system displays a success message with the User ID and clears all input fields for the next entry.",
        "conditions": [
          "All validations pass",
          "User record successfully written to USRSEC file",
          "No duplicate User ID exists"
        ],
        "actions": [
          "Display success message with User ID",
          "Clear all input fields",
          "Reset cursor to first field",
          "Set message color to green"
        ]
      }
    ],
    "validations": [
      {
        "field": "first_name",
        "rule": "NOT_EMPTY",
        "error_message": "First Name can NOT be empty...",
        "severity": "error"
      },
      {
        "field": "last_name",
        "rule": "NOT_EMPTY",
        "error_message": "Last Name can NOT be empty...",
        "severity": "error"
      },
      {
        "field": "user_id",
        "rule": "NOT_EMPTY",
        "error_message": "User ID can NOT be empty...",
        "severity": "error"
      },
      {
        "field": "user_id",
        "rule": "UNIQUE",
        "error_message": "User ID already exist...",
        "severity": "error"
      },
      {
        "field": "password",
        "rule": "NOT_EMPTY",
        "error_message": "Password can NOT be empty...",
        "severity": "error"
      },
      {
        "field": "user_type",
        "rule": "NOT_EMPTY",
        "error_message": "User Type can NOT be empty...",
        "severity": "error"
      }
    ],
    "calculations": [
      {
        "name": "Format Current Date",
        "description": "Formats the current system date into MM-DD-YY format for display",
        "formula": "Extract month, day, and last 2 digits of year from current date and format as MM-DD-YY",
        "input_fields": [
          "current_date"
        ],
        "output_field": "formatted_date"
      },
      {
        "name": "Format Current Time",
        "description": "Formats the current system time into HH-MM-SS format for display",
        "formula": "Extract hours, minutes, and seconds from current time and format as HH-MM-SS",
        "input_fields": [
          "current_time"
        ],
        "output_field": "formatted_time"
      }
    ],
    "workflows": [
      {
        "name": "Add New User",
        "description": "Complete workflow for adding a new user to the system",
        "steps": [
          {
            "step_number": 1,
            "action": "Display user addition screen with empty fields",
            "conditions": [
              "User has administrative privileges"
            ],
            "next_step": "2"
          },
          {
            "step_number": 2,
            "action": "User enters new user information",
            "conditions": [
              "Screen is displayed"
            ],
            "next_step": "3"
          },
          {
            "step_number": 3,
            "action": "Validate First Name is not empty",
            "conditions": [
              "Enter key pressed"
            ],
            "next_step": "4_or_error"
          },
          {
            "step_number": 4,
            "action": "Validate Last Name is not empty",
            "conditions": [
              "First Name validation passed"
            ],
            "next_step": "5_or_error"
          },
          {
            "step_number": 5,
            "action": "Validate User ID is not empty",
            "conditions": [
              "Last Name validation passed"
            ],
            "next_step": "6_or_error"
          },
          {
            "step_number": 6,
            "action": "Validate Password is not empty",
            "conditions": [
              "User ID validation passed"
            ],
            "next_step": "7_or_error"
          },
          {
            "step_number": 7,
            "action": "Validate User Type is not empty",
            "conditions": [
              "Password validation passed"
            ],
            "next_step": "8_or_error"
          },
          {
            "step_number": 8,
            "action": "Prepare user data for storage",
            "conditions": [
              "All field validations passed"
            ],
            "next_step": "9"
          },
          {
            "step_number": 9,
            "action": "Attempt to write user record to USRSEC file",
            "conditions": [
              "User data prepared"
            ],
            "next_step": "10_or_error"
          },
          {
            "step_number": 10,
            "action": "Check for duplicate User ID",
            "conditions": [
              "Write operation executed"
            ],
            "next_step": "11_or_duplicate_error"
          },
          {
            "step_number": 11,
            "action": "Display success message and clear form",
            "conditions": [
              "User record successfully written",
              "No duplicate User ID"
            ],
            "next_step": "end"
          }
        ]
      },
      {
        "name": "Clear Screen",
        "description": "Workflow for clearing all input fields and resetting the screen",
        "steps": [
          {
            "step_number": 1,
            "action": "Clear all input fields",
            "conditions": [
              "Clear key pressed"
            ],
            "next_step": "2"
          },
          {
            "step_number": 2,
            "action": "Clear error messages",
            "conditions": [
              "Fields cleared"
            ],
            "next_step": "3"
          },
          {
            "step_number": 3,
            "action": "Position cursor at first field",
            "conditions": [
              "Messages cleared"
            ],
            "next_step": "4"
          },
          {
            "step_number": 4,
            "action": "Redisplay screen",
            "conditions": [
              "Cursor positioned"
            ],
            "next_step": "end"
          }
        ]
      },
      {
        "name": "Return to Admin Menu",
        "description": "Workflow for navigating back to the administrative menu",
        "steps": [
          {
            "step_number": 1,
            "action": "Return to previous screen",
            "conditions": [
              "Return key pressed"
            ],
            "next_step": "end"
          }
        ]
      }
    ],
    "integrations": [
      {
        "name": "USRSEC File Integration",
        "type": "Data Store",
        "purpose": "Store and retrieve user security information",
        "data_exchanged": [
          "User ID",
          "First Name",
          "Last Name",
          "Password",
          "User Type"
        ],
        "trigger_conditions": [
          "New user addition requested",
          "User ID uniqueness check required"
        ]
      }
    ],
    "security": {
      "roles": [
        "Administrator",
        "Regular User"
      ],
      "permissions": [
        {
          "role": "Administrator",
          "resource": "User Management",
          "actions": [
            "Add new users",
            "Access user addition screen"
          ]
        }
      ],
      "authentication_requirements": [
        "User ID must be unique",
        "Password must be provided for all users",
        "User type must be specified to determine access level"
      ]
    },
    "error_handling": [
      {
        "error_code": "ERR_EMPTY_FIRSTNAME",
        "condition": "First Name field is empty or contains only spaces",
        "business_impact": "User cannot be added until First Name is provided",
        "suggested_action": "Display error message and position cursor at First Name field"
      },
      {
        "error_code": "ERR_EMPTY_LASTNAME",
        "condition": "Last Name field is empty or contains only spaces",
        "business_impact": "User cannot be added until Last Name is provided",
        "suggested_action": "Display error message and position cursor at Last Name field"
      },
      {
        "error_code": "ERR_EMPTY_USERID",
        "condition": "User ID field is empty or contains only spaces",
        "business_impact": "User cannot be added until User ID is provided",
        "suggested_action": "Display error message and position cursor at User ID field"
      },
      {
        "error_code": "ERR_EMPTY_PASSWORD",
        "condition": "Password field is empty or contains only spaces",
        "business_impact": "User cannot be added until Password is provided",
        "suggested_action": "Display error message and position cursor at Password field"
      },
      {
        "error_code": "ERR_EMPTY_USERTYPE",
        "condition": "User Type field is empty or contains only spaces",
        "business_impact": "User cannot be added until User Type is provided",
        "suggested_action": "Display error message and position cursor at User Type field"
      },
      {
        "error_code": "ERR_DUPLICATE_USERID",
        "condition": "User ID already exists in USRSEC file",
        "business_impact": "User cannot be added with duplicate User ID",
        "suggested_action": "Display error message indicating User ID already exists and position cursor at User ID field"
      },
      {
        "error_code": "ERR_WRITE_FAILED",
        "condition": "Unable to write user record to USRSEC file for reasons other than duplicate",
        "business_impact": "User addition fails and data is not persisted",
        "suggested_action": "Display generic error message and position cursor at First Name field"
      }
    ]
  },
  "frontend": {
    "screens": [
      {
        "id": "COUSR01",
        "name": "Add New User Screen",
        "purpose": "Allows administrators to add new Regular or Admin users to the system",
        "screen_type": "Data Entry Form",
        "navigation_from": [
          "Admin Menu"
        ],
        "navigation_to": [
          "Admin Menu"
        ],
        "sections": [
          {
            "name": "Header",
            "type": "Display",
            "fields": [
              {
                "name": "title01",
                "label": "Title Line 1",
                "type": "text",
                "input_output": "output",
                "required": false,
                "default_value": "",
                "validation": "",
                "help_text": "Application title"
              },
              {
                "name": "title02",
                "label": "Title Line 2",
                "type": "text",
                "input_output": "output",
                "required": false,
                "default_value": "",
                "validation": "",
                "help_text": "Screen subtitle"
              },
              {
                "name": "current_date",
                "label": "Current Date",
                "type": "date",
                "input_output": "output",
                "required": false,
                "default_value": "system_date",
                "validation": "",
                "help_text": "Current date in MM-DD-YY format"
              },
              {
                "name": "current_time",
                "label": "Current Time",
                "type": "time",
                "input_output": "output",
                "required": false,
                "default_value": "system_time",
                "validation": "",
                "help_text": "Current time in HH-MM-SS format"
              },
              {
                "name": "transaction_id",
                "label": "Transaction ID",
                "type": "text",
                "input_output": "output",
                "required": false,
                "default_value": "CU01",
                "validation": "",
                "help_text": "Transaction identifier"
              },
              {
                "name": "program_name",
                "label": "Program Name",
                "type": "text",
                "input_output": "output",
                "required": false,
                "default_value": "COUSR01C",
                "validation": "",
                "help_text": "Program identifier"
              }
            ]
          },
          {
            "name": "User Information",
            "type": "Input Form",
            "fields": [
              {
                "name": "first_name",
                "label": "First Name",
                "type": "text",
                "input_output": "input",
                "required": true,
                "default_value": "",
                "validation": "NOT_EMPTY",
                "help_text": "Enter the user's first name"
              },
              {
                "name": "last_name",
                "label": "Last Name",
                "type": "text",
                "input_output": "input",
                "required": true,
                "default_value": "",
                "validation": "NOT_EMPTY",
                "help_text": "Enter the user's last name"
              },
              {
                "name": "user_id",
                "label": "User ID",
                "type": "text",
                "input_output": "input",
                "required": true,
                "default_value": "",
                "validation": "NOT_EMPTY, UNIQUE",
                "help_text": "Enter a unique user ID (maximum 8 characters)"
              },
              {
                "name": "password",
                "label": "Password",
                "type": "password",
                "input_output": "input",
                "required": true,
                "default_value": "",
                "validation": "NOT_EMPTY",
                "help_text": "Enter the user's password (maximum 8 characters)"
              },
              {
                "name": "user_type",
                "label": "User Type",
                "type": "text",
                "input_output": "input",
                "required": true,
                "default_value": "",
                "validation": "NOT_EMPTY",
                "help_text": "Enter user type (Regular or Admin)"
              }
            ]
          },
          {
            "name": "Messages",
            "type": "Display",
            "fields": [
              {
                "name": "error_message",
                "label": "Error/Success Message",
                "type": "text",
                "input_output": "output",
                "required": false,
                "default_value": "",
                "validation": "",
                "help_text": "Displays error or success messages to the user"
              }
            ]
          }
        ],
        "actions": [
          {
            "name": "Add User",
            "trigger": "Enter Key",
            "description": "Validates input and adds new user to the system",
            "backend_process": "Process-Enter-Key",
            "success_navigation": "Same screen with success message and cleared fields",
            "error_handling": "Display error message and position cursor at problematic field"
          },
          {
            "name": "Return to Menu",
            "trigger": "PF3 Key",
            "description": "Returns to the administrative menu without saving",
            "backend_process": "Return-To-Prev-Screen",
            "success_navigation": "Admin Menu",
            "error_handling": "None"
          },
          {
            "name": "Clear Screen",
            "trigger": "PF4 Key",
            "description": "Clears all input fields and resets the screen",
            "backend_process": "Clear-Current-Screen",
            "success_navigation": "Same screen with cleared fields",
            "error_handling": "None"
          }
        ],
        "display_rules": [
          {
            "condition": "User successfully added",
            "affected_fields": [
              "error_message"
            ],
            "behavior": "Display success message in green color with User ID"
          },
          {
            "condition": "Validation error occurs",
            "affected_fields": [
              "error_message"
            ],
            "behavior": "Display error message and position cursor at first invalid field"
          },
          {
            "condition": "Duplicate User ID detected",
            "affected_fields": [
              "error_message",
              "user_id"
            ],
            "behavior": "Display duplicate error message and position cursor at User ID field"
          },
          {
            "condition": "Screen cleared",
            "affected_fields": [
              "first_name",
              "last_name",
              "user_id",
              "password",
              "user_type",
              "error_message"
            ],
            "behavior": "Clear all fields and position cursor at First Name field"
          }
        ]
      }
    ],
    "reports": [],
    "navigation_flow": [
      {
        "from_screen": "Admin Menu",
        "to_screen": "Add New User Screen",
        "trigger": "User selection",
        "conditions": [
          "User has administrative privileges"
        ]
      },
      {
        "from_screen": "Add New User Screen",
        "to_screen": "Admin Menu",
        "trigger": "PF3 Key",
        "conditions": []
      },
      {
        "from_screen": "Add New User Screen",
        "to_screen": "Add New User Screen",
        "trigger": "Enter Key or PF4 Key",
        "conditions": [
          "User addition successful or screen clear requested"
        ]
      }
    ],
    "user_messages": [
      {
        "code": "MSG_EMPTY_FIRSTNAME",
        "type": "error",
        "message": "First Name can NOT be empty...",
        "context": "First Name field validation"
      },
      {
        "code": "MSG_EMPTY_LASTNAME",
        "type": "error",
        "message": "Last Name can NOT be empty...",
        "context": "Last Name field validation"
      },
      {
        "code": "MSG_EMPTY_USERID",
        "type": "error",
        "message": "User ID can NOT be empty...",
        "context": "User ID field validation"
      },
      {
        "code": "MSG_EMPTY_PASSWORD",
        "type": "error",
        "message": "Password can NOT be empty...",
        "context": "Password field validation"
      },
      {
        "code": "MSG_EMPTY_USERTYPE",
        "type": "error",
        "message": "User Type can NOT be empty...",
        "context": "User Type field validation"
      },
      {
        "code": "MSG_DUPLICATE_USERID",
        "type": "error",
        "message": "User ID already exist...",
        "context": "User ID uniqueness validation"
      },
      {
        "code": "MSG_ADD_FAILED",
        "type": "error",
        "message": "Unable to Add User...",
        "context": "General user addition failure"
      },
      {
        "code": "MSG_ADD_SUCCESS",
        "type": "success",
        "message": "User [User ID] has been added ...",
        "context": "Successful user addition"
      }
    ]
  },
  "data_flows": [
    {
      "name": "User Addition Data Flow",
      "description": "Flow of user data from screen input to persistent storage",
      "source": "Add New User Screen",
      "destination": "USRSEC File",
      "data_elements": [
        "First Name",
        "Last Name",
        "User ID",
        "Password",
        "User Type"
      ],
      "transformations": [
        "Validate all fields are not empty",
        "Check User ID uniqueness",
        "Map screen fields to user record structure"
      ]
    },
    {
      "name": "Header Information Data Flow",
      "description": "Flow of system information to screen header",
      "source": "System",
      "destination": "Add New User Screen Header",
      "data_elements": [
        "Current Date",
        "Current Time",
        "Transaction ID",
        "Program Name",
        "Title Information"
      ],
      "transformations": [
        "Format date as MM-DD-YY",
        "Format time as HH-MM-SS",
        "Retrieve title information from common area"
      ]
    },
    {
      "name": "Error Message Data Flow",
      "description": "Flow of error and success messages to the user interface",
      "source": "Validation and Business Logic",
      "destination": "Add New User Screen Message Area",
      "data_elements": [
        "Error Messages",
        "Success Messages"
      ],
      "transformations": [
        "Set message color based on message type",
        "Format message with dynamic data (e.g., User ID)"
      ]
    }
  ],
  "business_constraints": [
    {
      "type": "Data Integrity",
      "description": "User IDs must be unique across the entire system",
      "impact": "Prevents duplicate user accounts and ensures proper user identification"
    },
    {
      "type": "Data Completeness",
      "description": "All user fields must be populated before a user can be added",
      "impact": "Ensures complete user records and prevents incomplete data in the system"
    },
    {
      "type": "Security",
      "description": "Passwords are stored without visible encryption or hashing in the current implementation",
      "impact": "Potential security vulnerability that should be addressed in modernization"
    },
    {
      "type": "Access Control",
      "description": "User type determines access permissions within the system",
      "impact": "Controls what functions and data users can access based on their role"
    },
    {
      "type": "Audit Trail",
      "description": "No explicit audit trail is implemented for user creation actions",
      "impact": "Lack of tracking for security-related administrative actions"
    },
    {
      "type": "Session Management",
      "description": "Program uses communication area to maintain session information",
      "impact": "Enables navigation between screens while maintaining context"
    }
  ]
}